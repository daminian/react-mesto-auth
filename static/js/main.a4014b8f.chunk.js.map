{"version":3,"sources":["images/logo.svg","components/Footer.js","contexts/CurrentUserContext.js","components/Header.js","components/Card.js","components/Main.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ImagePopup.js","utils/api.js","components/Login.js","components/Register.js","components/InfoTooltip.js","components/ProtectedRoute.js","components/mestoAuth.js","components/App.js","index.js"],"names":["module","exports","Footer","className","CurrentUserContext","React","createContext","Header","onLinkClick","CurrentUser","useContext","src","logo","alt","email","path","to","exact","onClick","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","type","link","name","length","Main","onEditProfile","onAddPlace","onEditAvatar","cards","style","backgroundImage","avatar","about","map","item","key","PopupWithForm","title","cildren","isOpen","onClose","onSubmit","noValidate","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","useEffect","required","minLength","maxLength","placeholder","onChange","e","target","value","id","preventDefault","EditAvatarPopup","onUpdateAvatar","userAvatar","useRef","defaultValue","ref","current","AddPlacePopup","onAddPlaseSubmit","setLink","ImagePopup","state","api","options","this","_url","url","_headers","headers","data","fetch","method","authorization","body","JSON","stringify","then","res","ok","json","Promise","reject","status","Error","_addLike","_deliteLike","all","getInitialCards","getUserInfo","Login","handleLogin","password","setData","handleChange","htmlFor","Register","handleRegister","InfoTooltip","ProtectedRoute","Component","component","props","loggedIn","BASE_URL","checkResponce","withRouter","setCurrentUser","setCards","editProfileIsOpen","isEditProfilePopupOpen","addCardIsOpen","isAddPlacePopupOpen","editAvatarIsOpen","isEditAvatarPopupOpen","selectedCard","setSelectedCard","infoTooltipIsOpen","isinfoTooltipOpen","setLoggedIn","history","useHistory","closeAllPopups","getAppInfo","userInfo","user","cardsList","catch","err","console","log","token","localStorage","getItem","mestoAuth","push","tokenCheck","Provider","clear","linkText","changeLikeCardStatus","newCard","newCards","c","deleteCard","filter","setItem","updateProfileInfo","updateAvatar","postNewCard","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a4014b8f.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.d3d4a407.svg\";","import React from 'react';\r\n\r\nfunction Footer() {\r\n    return(\r\n        <footer className=\"footer root__content\">\r\n        <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\r\n        </footer>\r\n    )\r\n}\r\n\r\nexport default Footer","import React from 'react';\r\nexport const CurrentUserContext = React.createContext();","import React from 'react';\r\nimport { Link, Route } from 'react-router-dom';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport logo from '../images/logo.svg';\r\n\r\nfunction Header({onLinkClick}) {\r\n    const CurrentUser = React.useContext(CurrentUserContext);\r\n    return (\r\n        <header className=\"header root__content\">\r\n        <div className=\"header__menu\">\r\n            <img src={logo} alt=\"\" className=\"header__logo\"/>\r\n            <div className=\"header__profile\">\r\n                <p className=\"header__email\">{CurrentUser.email}</p>\r\n                <Route path=\"/sign-up\">\r\n                    <Link className=\"header__link\" to=\"/sign-in\">Войти</Link>\r\n                </Route>\r\n                <Route path=\"/sign-in\">\r\n                    <Link className=\"header__link\" to=\"/sign-up\">Регистрация</Link>\r\n                </Route>\r\n                <Route exact path=\"/\">\r\n                    <Link className=\"header__link\" to=\"/sign-in\" onClick={onLinkClick}>Выйти</Link>\r\n                </Route>\r\n            </div>\r\n        </div>\r\n        </header>\r\n    )\r\n}\r\n\r\nexport default Header","import React from 'react';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nconst Card = ({card, onCardClick, onCardLike, onCardDelete}) => {\r\n\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    const isOwn = card.owner._id === currentUser._id;\r\n    const cardDeleteButtonClassName = (\r\n        `cards__trash ${isOwn ? '' : 'cards__trash_hidden'}`\r\n    ); \r\n    \r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n    const cardLikeButtonClassName = (\r\n        `cards__like ${isLiked ? 'cards__like_active' : ''}`\r\n    )\r\n\r\n    function handleClick() {\r\n        onCardClick(card);\r\n    }\r\n    \r\n    function handleLikeClick() {\r\n        onCardLike(card)\r\n    }\r\n\r\n    function handleDeleteClick() {\r\n        onCardDelete(card)\r\n    } \r\n\r\n    return (\r\n        <div className=\"cards\">\r\n            <button type=\"button\" className={cardDeleteButtonClassName} onClick={handleDeleteClick}></button>\r\n            <img src={`${card.link}`} alt=\"\" className=\"cards__photo\" onClick={handleClick}/>\r\n            <h2 className=\"cards__name\">{card.name}</h2>\r\n            <div className=\"cards__like-container\"> \r\n                <button className={cardLikeButtonClassName} onClick={handleLikeClick}></button>\r\n                <span className=\"cards__like-counter\">{card.likes.length}</span> \r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Card","import React from 'react';\r\nimport Card from './Card.js';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nconst Main = ({onEditProfile, onAddPlace, onEditAvatar, onCardClick, cards, onCardLike, onCardDelete}) => {\r\n\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    \r\n    return(\r\n        <main className=\"main root__content\">\r\n        <section className=\"profile\">\r\n            <div className=\"profile__section\">\r\n                <div className=\"profile__avatar\" onClick={onEditAvatar}><img style={{ backgroundImage: `url(${currentUser.avatar})` }} alt=\"\" className=\"profile__image\"/></div>\r\n                <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n                <p className=\"profile__job\">{currentUser.about}</p>\r\n                <button className=\"profile__edit \" onClick={onEditProfile}></button>\r\n            </div>\r\n            <button className=\"profile__add\" onClick={onAddPlace}></button>\r\n        </section>\r\n        <section className=\"grid\">\r\n            {cards.map(item => <Card key={item._id} card={item} onCardClick={onCardClick} onCardLike={onCardLike} onCardDelete={onCardDelete}/>)}\r\n        </section>\r\n    </main>\r\n    )\r\n}\r\n\r\nexport default Main","import React from 'react';\r\n\r\nconst PopupWithForm = ({name, title, cildren, isOpen, onClose, onSubmit}) => {\r\n    return (<section className={`popup popup-${name} ${isOpen ? (\"popup_opened\"):(\"\")}`}>\r\n        <div className=\"popup__container\">\r\n            <button type=\"button\" className=\"popup__close\" onClick={onClose}></button>\r\n            <form className=\"popup__form\" name={name} noValidate onSubmit={onSubmit}>\r\n                <h3 className=\"popup__title popup__profile-title\">{title}</h3>\r\n                {cildren}\r\n                <button type=\"submit\" className=\"popup__button\">Сохранить</button>\r\n            </form>\r\n        </div>\r\n    </section>)\r\n}\r\n\r\nexport default PopupWithForm","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopup({isOpen, onClose, onUpdateUser}) {\r\n\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    const [name, setName] = React.useState(CurrentUserContext.name);\r\n    const [description, setDescription] = React.useState(CurrentUserContext.about);\r\n\r\n    function handleNameChange(e) {\r\n        setName(e.target.value)\r\n    }\r\n\r\n    function handleDescriptionChange(e) {\r\n        setDescription(e.target.value)\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        onUpdateUser({\r\n            name: name,\r\n            about: description\r\n        });\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        setName(currentUser.name);\r\n        setDescription(currentUser.about);\r\n      }, [currentUser]); \r\n\r\n    return (\r\n        <PopupWithForm name=\"profile\" title=\"Редактировать профиль\" cildren={\r\n            <>\r\n            <label className=\"popup__label\">\r\n            <input type=\"text\" name=\"name\" className=\"popup__input popup__name\" required minLength=\"2\"\r\n                maxLength=\"40\" placeholder=\"Имя\" onChange={handleNameChange} value={name || ''}/>\r\n            <span id=\"name-error\" className=\"popup__error\"></span>\r\n            </label>\r\n            <label className=\"popup__label\">\r\n            <input type=\"text\" name=\"job\" className=\"popup__input popup__job\" required minLength=\"2\"\r\n                maxLength=\"200\" placeholder=\"Занятие\" onChange={handleDescriptionChange} value={description || ''}/>\r\n            <span id=\"job-error\" className=\"popup__error\"></span>\r\n            </label>\r\n            </>\r\n        } isOpen = {isOpen} onClose={onClose} onSubmit={handleSubmit}/>\r\n    )\r\n}\r\n\r\nexport default EditProfilePopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\n\r\nfunction EditAvatarPopup({isOpen, onClose, onUpdateAvatar}) {\r\n\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    const userAvatar = React.useRef();\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        onUpdateAvatar(userAvatar.current.value)\r\n    }\r\n\r\n    return(\r\n        <PopupWithForm name=\"avatar\" title=\"Обновить аватар\" cildren={\r\n            <>\r\n            <label className=\"popup__label\">\r\n                <input type=\"url\" name=\"url\" className=\"popup__input popup__avatar-links\" placeholder=\"Ссылка на аватарку\" required defaultValue={currentUser.avatar} ref={userAvatar}/>\r\n                <span id=\"url-error\" className=\"popup__error\"></span>\r\n            </label>\r\n            </>\r\n        } isOpen = {isOpen} onClose={onClose} onSubmit={handleSubmit}/>\r\n    )\r\n}\r\n\r\nexport default EditAvatarPopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\n\r\nfunction AddPlacePopup({isOpen, onClose, onAddPlaseSubmit}) {\r\n\r\n    const [name, setName] = React.useState('');\r\n    const [link, setLink] = React.useState('');\r\n\r\n    function handleNameChange(e) {\r\n        setName(e.target.value)\r\n    }\r\n\r\n    function handleLinkChange(e) {\r\n        setLink(e.target.value)\r\n    }\r\n    \r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        onAddPlaseSubmit({\r\n            name: name,\r\n            link: link\r\n        });\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm name=\"add\" title=\"Новое место\" cildren={\r\n            <>\r\n            <label className=\"popup__label\">\r\n                <input type=\"text\" name=\"mesto\" className=\"popup__input popup__mesto\" placeholder=\"Название\"\r\n                    required minLength=\"1\" maxLength=\"30\" onChange={handleNameChange} value={name}/>\r\n                <span id=\"mesto-error\" className=\"popup__error\"></span>\r\n            </label>\r\n            <label className=\"popup__label\">\r\n                <input type=\"url\" name=\"url\" className=\"popup__input popup__links\"\r\n                    placeholder=\"Ссылка на картинку\" required onChange={handleLinkChange} value={link}/>\r\n                <span id=\"url-error\" className=\"popup__error\"></span>\r\n            </label>\r\n            </>\r\n        } isOpen = {isOpen} onClose={onClose} onSubmit={handleSubmit}/>\r\n    )\r\n}\r\n\r\nexport default AddPlacePopup;","import React from 'react';\r\n\r\nfunction ImagePopup({onClose, card}) {\r\n    return (\r\n        <section className={`popup popup-card ${card.state && (\"popup_opened\")}`}>\r\n        <div className=\"popup__form\">\r\n            <button type=\"button\" className=\"popup__close\" onClick={onClose}></button>\r\n            <figure className=\"popup__image-container\"><img src={card.src} alt=\"\" className=\"popup__image\"/>\r\n            <figcaption className=\"popup__image-title\">{card.name}</figcaption>\r\n            </figure>\r\n        </div>\r\n    </section>\r\n    )\r\n}\r\n\r\nexport default ImagePopup","class Api {\r\n    constructor(options) {\r\n        this._url = options.url\r\n        this._headers = options.headers\r\n    }\r\n\r\n    updateAvatar(data) {\r\n        return fetch(`${this._url}/users/me/avatar`, {\r\n                method: \"PATCH\",\r\n                headers: {\r\n                    authorization: this._headers,\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({ \"avatar\": data }),\r\n            })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    return res.json();\r\n                }\r\n\r\n                return Promise.reject(`Ошибка: ${res.status}`);\r\n            })\r\n    }\r\n\r\n    updateProfileInfo(data) {\r\n        return fetch(`${this._url}/users/me`, {\r\n                method: \"PATCH\",\r\n                headers: {\r\n                    authorization: this._headers,\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    name: `${data.name}`,\r\n                    about: `${data.about}`\r\n                }),\r\n            })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    return res.json();\r\n                }\r\n\r\n                return Promise.reject(`Ошибка: ${res.status}`);\r\n            })\r\n    }\r\n\r\n    getUserInfo() {\r\n        return fetch(`${this._url}/users/me`, {\r\n                method: \"GET\",\r\n                headers: {\r\n                    authorization: this._headers,\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    return res.json();\r\n                }\r\n\r\n                return Promise.reject(`Ошибка: ${res.status}`);\r\n            })\r\n    }\r\n\r\n    getInitialCards() {\r\n        return fetch(`${this._url}/cards`, {\r\n                method: \"GET\",\r\n                headers: {\r\n                    authorization: this._headers\r\n                }\r\n            })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    return res.json();\r\n                }\r\n                return Promise.reject(new Error(`Ошибка: ${res.status}`));\r\n            })\r\n    }\r\n\r\n    postNewCard(card) {\r\n        return fetch(`${this._url}/cards`, {\r\n                method: \"POST\",\r\n                headers: {\r\n                    authorization: this._headers,\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    name: card.name,\r\n                    link: card.link\r\n                }),\r\n            })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    return res.json();\r\n                }\r\n\r\n                return Promise.reject(`Ошибка: ${res.status}`);\r\n            })\r\n    }\r\n\r\n    deleteCard(id) {\r\n        return fetch(`${this._url}/cards/${id}`, {\r\n                method: \"DELETE\",\r\n                headers: {\r\n                    authorization: this._headers,\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    return res.json();\r\n                }\r\n\r\n                return Promise.reject(`Ошибка: ${res.status}`);\r\n            })\r\n    }\r\n\r\n    changeLikeCardStatus(id, isLiked) {\r\n        if (isLiked === true) {\r\n            return this._addLike(id);\r\n        } else {\r\n            return this._deliteLike(id);\r\n        }\r\n    }\r\n\r\n    _addLike(id) {\r\n        return fetch(`${this._url}/cards/likes/${id}`, {\r\n                method: \"PUT\",\r\n                headers: {\r\n                    authorization: this._headers,\r\n                }\r\n            })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    return res.json();\r\n                }\r\n\r\n                return Promise.reject(`Ошибка: ${res.status}`);\r\n            })\r\n    }\r\n    _deliteLike(id) {\r\n        return fetch(`${this._url}/cards/likes/${id}`, {\r\n                method: \"DELETE\",\r\n                headers: {\r\n                    authorization: this._headers,\r\n                }\r\n            })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    return res.json();\r\n                }\r\n\r\n                return Promise.reject(`Ошибка: ${res.status}`);\r\n            })\r\n    }\r\n\r\n    getAppInfo() {\r\n        return Promise.all([this.getInitialCards(), this.getUserInfo()]);\r\n    }\r\n\r\n    _getResponseData(data) {\r\n        if (data.ok) {\r\n            return data.json()\r\n        }\r\n    }\r\n}\r\n\r\nconst api = new Api({\r\n    url: 'https://mesto.nomoreparties.co/v1/cohort-15',\r\n    headers: '8ba8ee25-f796-4e6c-83bd-8c6087015f7d'\r\n})\r\n\r\nexport default api","import React from 'react';\n\nfunction Login({handleLogin}) {\n\n  const [data, setData] = React.useState({\n    password: '',\n    email: ''\n  })\n\n  function handleChange(e) {\n    const {name, value} = e.target;\n    setData({\n      ...data,\n      [name]: value\n    })\n  }\n\n  function handleSubmit(e) {\n      e.preventDefault();\n      let {password, email} = data\n      handleLogin(password, email)\n    }\n\n    return (\n      <div className=\"login\">\n        <p className=\"login__welcome\">\n          Вход\n        </p>\n        <form onSubmit={handleSubmit} className=\"login__form\">\n          <input required className=\"login__input\" id=\"email\" name=\"email\" type=\"email\" value={data.email || ''} onChange={handleChange} />\n          <label htmlFor=\"email\"></label>\n          <input required className=\"login__input\" id=\"password\" name=\"password\" type=\"password\" value={data.password || ''} onChange={handleChange} />\n          <label htmlFor=\"password\"></label>\n          <div className=\"login__button-container\">\n            <button type=\"submit\" className=\"login__button\" >Войти</button>\n          </div>\n        </form>\n      </div>\n    )\n\n  }\n  \n  export default Login;","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction Register({handleRegister}) {\n    \n  const [data, setData] = React.useState({\n    password: '',\n    email: ''\n  })\n\n  function handleChange(e) {\n    const {name, value} = e.target;\n    setData({\n      ...data,\n      [name]: value\n    })\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    let {password, email} = data\n    handleRegister(password, email)\n  }\n\n  return(\n    <div className=\"register\">\n      <p className=\"register__welcome\">\n        Регистрация\n      </p>\n      <form className=\"register__form\" onSubmit={handleSubmit}>\n        <input required className=\"register__input\" id=\"email\" name=\"email\" type=\"email\" value={data.email} onChange={handleChange} />\n        <label htmlFor=\"email\"></label>\n        <input required className=\"register__input\" id=\"password\" name=\"password\" type=\"password\" value={data.password} onChange={handleChange} />\n        <label htmlFor=\"password\"></label>\n        <div className=\"register__button-container\">\n          <button type=\"submit\" className=\"register__button\" >Зарегистрироваться</button>\n        </div>\n      </form>\n      <div className=\"register__signin\">\n        <Link to=\"/sign-in\" className=\"register__link\">Уже зарегистрированы? Войти</Link>\n      </div>\n    </div>\n  )\n}\n  \n  export default Register;","import React from 'react';\n\nconst InfoTooltip = ({isOpen, onClose}) => {\n    return (\n        <section className={`popup ${isOpen ? (\"popup_opened\"):(\"\")}`}>\n        <div className=\"popup__container\">\n            <div className=\"popup__form\">\n                <button type=\"button\" className=\"popup__close\" onClick={onClose}></button>\n                <div alt=\"\" className=\"popup__image\"></div>\n                <p className=\"popup__text\">Вы успешно зарегистрировались!</p>\n            </div>\n        </div>\n        </section>\n    )\n}\n\nexport default InfoTooltip","import React from 'react';\nimport { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\n  return (\n    <Route>\n      {\n        () => props.loggedIn === true ? <Component {...props} /> : <Redirect to=\"/sign-in\" />\n      }\n    </Route>\n)}\n\nexport default ProtectedRoute;","export const BASE_URL = 'https://auth.nomoreparties.co';\n\nconst checkResponce = (res) => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`)\n\nexport const register = (password, email) => {\n    return fetch(`${BASE_URL}/signup`, {\n        method: 'POST',\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            \"password\": `${password}`,\n            \"email\": `${email}`})\n    })\n    .then(checkResponce)\n};\n\nexport const authorization = (password, email) => {\n    return fetch(`${BASE_URL}/signin`, {\n        method: 'POST',\n        headers: {\n            \"Content-Type\": \"application/json\" \n        },\n        body: JSON.stringify({\n            \"password\": `${password}`,\n            \"email\": `${email}`\n        })\n    })\n    .then(checkResponce)\n}\n\nexport const getContent = (token) => {\n    return fetch(`${BASE_URL}/users/me`, {\n        method: 'GET',\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"Authorization\" : `Bearer ${token}`\n        }\n    })\n    .then(checkResponce)\n}","import React from 'react';\nimport { Route, Redirect, Switch, useHistory, withRouter } from 'react-router-dom';\nimport Footer from './Footer';\nimport Header from './Header';\nimport Main from './Main';\nimport EditPofilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport ImagePopup from './ImagePopup';\nimport api from '../utils/api';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\nimport Login from './Login';\nimport Register from './Register';\nimport InfoTooltip from './InfoTooltip';\nimport ProtectedRoute from './ProtectedRoute';\nimport * as mestoAuth from './mestoAuth';\n\nfunction App() {\n\n  const [currentUser, setCurrentUser] = React.useState('');\n  const [cards, setCards] = React.useState([]);\n  const [editProfileIsOpen , isEditProfilePopupOpen] = React.useState(false)\n  const [addCardIsOpen , isAddPlacePopupOpen] = React.useState(false)\n  const [editAvatarIsOpen , isEditAvatarPopupOpen] = React.useState(false)\n  const [selectedCard, setSelectedCard] = React.useState({state:false, src: ''});\n  const [infoTooltipIsOpen , isinfoTooltipOpen] = React.useState(false)\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const history = useHistory();\n\n  function handleCardClick(props) {\n    setSelectedCard({state: true, src: props.link, name: props.name})\n  }\n\n  function handleEditProfileClick() {\n    isEditProfilePopupOpen(true)\n  }\n\n  function handleAddCardClick() {\n    isAddPlacePopupOpen(true)\n  }\n\n  function handleEditAvatarClick() {\n    isEditAvatarPopupOpen(true)\n  }\n\n  \n  function closeAllPopups() {\n    isEditProfilePopupOpen(false)\n    isAddPlacePopupOpen(false)\n    isEditAvatarPopupOpen(false)\n    isinfoTooltipOpen(false)\n    setSelectedCard({state:false})\n  }\n\n  function handleUpdateUser({name, about}) {\n    api.updateProfileInfo({name, about})\n    .then((user) => {\n      setCurrentUser(user)\n      closeAllPopups()\n    })\n    .catch((err) => {\n      console.log(err)\n    })   \n  }\n\n  function handleUpdateAvatar(avatar) {\n    api.updateAvatar(avatar)\n    .then((avatar) => {\n     setCurrentUser(avatar)\n     closeAllPopups()\n    })\n    .catch((err) => {\n      console.log(err)\n    })\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    \n    api.changeLikeCardStatus(card._id, !isLiked)\n    .then((newCard) => {\n      const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n      setCards(newCards);\n    })\n    .catch((err) => {\n      console.log(err)\n    })\n  }\n  \n  function handleCardDelete(card) {\n    api.deleteCard(card._id)\n    .then(() => {\n      const newCards = cards.filter((item) => {\n        return item._id !== card._id\n      });\n        setCards(newCards);\n      })\n    .catch((err) => {\n      console.log(err)\n    })\n  }\n  \n  function handleAddPlaceSubmit(card) {\n    api.postNewCard(card)\n    .then((newCard) => {\n      setCards([newCard, ...cards])\n      closeAllPopups()\n    })\n    .catch((err) => {\n      console.log(err)\n    })\n  }\n  \n  React.useEffect(() => {\n    api.getAppInfo()\n        .then((data) => {\n            data = {cards: data[0],user: data[1]}\n            const userInfo = ({\n                name: data.user.name,\n                about: data.user.about,\n                avatar: data.user.avatar,\n                _id: data.user._id\n            })\n            const cardsList = data.cards.map((item) => ({\n              _id: item._id,\n              name: item.name,\n              likes: item.likes,\n              link: item.link,\n              owner: item.owner\n            }))\n            setCurrentUser(userInfo)\n            setCards(cardsList)\n        })\n        .catch((err) => {\n            console.log(err)\n        })\n  },[])\n\n  React.useEffect(() => {\n    tokenCheck()\n  },[])\n\n  function handleRegisterClick(password, email) {\n    isinfoTooltipOpen(true)\n    mestoAuth.register(password, email)\n      .then(data => {\n        if (data) {\n          setCurrentUser({\n            ...currentUser,\n            email: data.data.email\n          })\n          history.push('/sign-in')\n        }\n      })\n      .catch(err => console.log(err))\n  }\n\n  function handleLoginClick(password, email) {\n    mestoAuth.authorization(password, email)\n      .then(data => {\n        if(data.token) {\n          localStorage.setItem('token', data.token)\n          setLoggedIn(true)\n          history.push('/')\n        }\n        \n      })\n      .catch(err => console.log(err));\n  }\n\n  function tokenCheck() {\n    const token = localStorage.getItem('token')\n    mestoAuth.getContent(token)\n    .then(res => {\n      if(res.data.email) {\n        setLoggedIn(true)\n        history.push('/')\n      }\n    })\n  }\n\n  const handleLogoutClick = () => {\n    localStorage.clear('token')\n    setLoggedIn(false)\n  }\n\n  return (\n  <CurrentUserContext.Provider value={currentUser}>\n    <Header onLinkClick={handleLogoutClick} linkText={'Выйти'}/>\n    <Switch>\n      <ProtectedRoute exact path=\"/\" loggedIn={loggedIn} component={Main} onEditProfile={handleEditProfileClick} onAddPlace={handleAddCardClick} onEditAvatar={handleEditAvatarClick} onCardClick={handleCardClick} \n    cards={cards} onCardLike={handleCardLike} onCardDelete={handleCardDelete}/>\n      <Route path=\"/sign-in\">\n        <Login handleLogin={handleLoginClick}/>\n      </Route>\n      <Route path=\"/sign-up\">\n        <Register handleRegister={handleRegisterClick}/>\n      </Route>\n      <Route>\n        {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" />}\n      </Route>\n    </Switch>\n    <Footer />\n    <EditPofilePopup isOpen={editProfileIsOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser}/>\n    <EditAvatarPopup isOpen={editAvatarIsOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar}/>\n    <AddPlacePopup isOpen={addCardIsOpen} onClose={closeAllPopups} onAddPlaseSubmit={handleAddPlaceSubmit}/>\n    <ImagePopup card={selectedCard} onClose={closeAllPopups}/>\n    <InfoTooltip isOpen ={infoTooltipIsOpen} onClose={closeAllPopups}/>\n  </CurrentUserContext.Provider>\n  );\n}\n\nexport default withRouter(App);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App.js';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App/>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}